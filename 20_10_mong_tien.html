<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ch√∫c m·ª´ng 20/10 M·ªông Ti√™n</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #ffe6f0;
    }
    .dancing-script { font-family: 'Dancing Script', cursive; }

    .flower {
      position: absolute;
      font-size: 3rem;
      opacity: 0;
      pointer-events: none;
      user-select: none;
      animation: rise-and-fade 3s ease-out forwards;
      color: #d1007a;
      z-index: 20;
    }

    .card {
      background-color: #fff;
      box-shadow: 0 20px 25px -5px rgba(225, 0, 150, 0.3),
                  0 10px 10px -5px rgba(225, 0, 150, 0.1);
      border: 4px solid #ff70a6;
      position: relative;
      min-height: 120vh;
      overflow: hidden;
      border-radius: 1.5rem;
      transition: opacity 1s ease, transform 1s ease;
    }
    .fade-out {
      opacity: 0;
      transform: scale(0.95);
    }

    .main-message {
      color: #d1007a;
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
    }

    @keyframes rise-and-fade {
      0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 1; }
      50% { opacity: 0.8; }
      100% { transform: translateY(-250px) scale(1.5) rotate(720deg); opacity: 0; }
    }

    /* üö® Quan tr·ªçng: v√πng ·∫£nh ·∫©n ho√†n to√†n */
    #image-display-area {
      position: absolute;
      inset: 0;
      display: none; /* ·∫®n ho√†n to√†n cho ƒë·∫øn khi click 3 l·∫ßn */
      align-items: center;
      justify-content: center;
      background-color: #fff;
      border-radius: 1.5rem;
      opacity: 0;
    }
    #image-display-area.show {
      display: flex;
      animation: fadeIn 1.2s ease-in forwards;
    }

    #my-image {
      width: 85%;
      max-width: 420px;
      border-radius: 1rem;
      box-shadow: 0 0 20px rgba(255, 112, 166, 0.4);
      transform: scale(0.9);
      opacity: 0;
      animation: fadeInImage 1.5s ease-in-out forwards;
      animation-delay: 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes fadeInImage {
      0% { opacity: 0; transform: scale(0.9); }
      100% { opacity: 1; transform: scale(1); }
    }
  </style>
</head>

<body class="flex items-center justify-center min-h-screen p-4" id="app">

  <div id="card-container"
    class="card w-full max-w-lg sm:max-w-xl p-10 sm:p-12 text-center cursor-pointer hover:scale-[1.02] transition-transform duration-300">

    <div id="greeting-content" class="space-y-6">
      <h1 class="text-4xl sm:text-6xl dancing-script main-message font-bold">
        Ch√∫c M·ª´ng Ng√†y 20/10
      </h1>
      <div id="flower-area" class="relative">
        <p class="text-2xl sm:text-3xl font-semibold mb-4 text-pink-600">
          G·ª≠i em y√™u M·ªông Ti√™n,
        </p>
        <p class="text-xl text-gray-700">
          Ch√∫c M·ªông Ti√™n ng√†y Ph·ª• N·ªØ Vi·ªát Nam tr√†n ng·∫≠p ni·ªÅm vui, h·∫°nh ph√∫c v√† lu√¥n xinh ƒë·∫πp, r·∫°ng ng·ªùi nh∆∞ nh·ªØng ƒë√≥a hoa.
        </p>
        <p class="mt-8 text-2xl font-bold main-message dancing-script">
          M·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn v·ªõi em!
        </p>
      </div>
      <p id="instruction-text" class="text-base text-gray-500 mt-6">
        (Nh·∫•n ho·∫∑c ch·∫°m v√†o ƒë√¢y 3 l·∫ßn ƒë·ªÉ nh·∫≠n b·∫•t ng·ªù!)
      </p>
    </div>

    <!-- ·∫¢nh ·∫©n ho√†n to√†n ban ƒë·∫ßu -->
    <div id="image-display-area">
      <img id="my-image"
        src="/chuc-mung-mong-tien/5b31bc8086430b1d5252.jpg"
        alt="H√¨nh ·∫£nh c·ªßa b·∫°n"
        onerror="this.src='https://placehold.co/500x500/ff99cc/333333?text=L%E1%BB%97i+%E1%BA%A2nh';" />
    </div>
  </div>

  <div id="flower-container"></div>

  <script>
    const FLOWER_EMOJI = "üå∏";
    const ROSE_EMOJI = "üåπ";
    const HEART_EMOJI = "üíñ";
    const EMOJIS = [ROSE_EMOJI, ROSE_EMOJI, FLOWER_EMOJI, HEART_EMOJI];

    const cardContainer = document.getElementById('card-container');
    const greetingContent = document.getElementById('greeting-content');
    const imageDisplayArea = document.getElementById('image-display-area');
    const instructionText = document.getElementById('instruction-text');
    const flowerContainer = document.getElementById('flower-container');

    let interactionCount = 0;
    const MAX_INTERACTIONS = 3;

    function createFlower(x, y) {
      if (interactionCount >= MAX_INTERACTIONS) return;
      const flower = document.createElement('div');
      flower.className = 'flower';
      flower.innerText = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
      const size = Math.random() * 0.8 + 2.0;
      const offsetX = (Math.random() - 0.5) * 80;
      const offsetY = (Math.random() - 0.5) * 20;
      const delay = Math.random() * 0.5;
      flower.style.left = x + offsetX + 'px';
      flower.style.top = y + offsetY + 'px';
      flower.style.fontSize = size + 'rem';
      flower.style.animationDelay = delay + 's';
      flowerContainer.appendChild(flower);
      flower.addEventListener('animationend', () => flower.remove());
    }

    function handleInteraction(e) {
      e.preventDefault();
      if (interactionCount < MAX_INTERACTIONS) {
        interactionCount++;
        const x = e.touches ? e.touches[0].clientX : e.clientX;
        const y = e.touches ? e.touches[0].clientY : e.clientY;
        for (let i = 0; i < 6; i++) createFlower(x, y);
        if (interactionCount < MAX_INTERACTIONS) {
          instructionText.innerText = `(Nh·∫•n th√™m ${MAX_INTERACTIONS - interactionCount} l·∫ßn n·ªØa ƒë·ªÉ nh·∫≠n b·∫•t ng·ªù!)`;
        } else {
          instructionText.innerText = `(B·∫•t ng·ªù d√†nh cho em ƒë√¢y!)`;
          showImage();
        }
      }
    }

    function showImage() {
      cardContainer.classList.add('fade-out');
      setTimeout(() => {
        greetingContent.classList.add('hidden');
        imageDisplayArea.classList.add('show');
      }, 1000);
      cardContainer.removeEventListener('click', handleInteraction);
      cardContainer.removeEventListener('touchstart', handleInteraction);
    }

    cardContainer.addEventListener('click', handleInteraction);
    cardContainer.addEventListener('touchstart', handleInteraction);
  </script>
</body>
</html>
